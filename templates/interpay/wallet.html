{% extends 'interpay/base.html' %}
{% load i18n %}
{% load static %}
{% load staticfiles %}
{% load currency %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
     {% block flag %}

    {% endblock %}
    <title>
        {% block title %}
            {% trans 'Wallet Info ' %}- Interpay Iran
        {% endblock %}
    </title>
    {% block CSS %}
       <link rel="stylesheet" href="{% static 'interpay/bootstrap/css/bootstrap.min.css' %}">
       <link rel="stylesheet" href="{% static 'interpay/bootstrap/css/bootstrap-theme.min.css' %}">
       <link rel="stylesheet" href="{% static "interpay/bower_components/font-awesome/css/font-awesome.css" %}">
       <link rel="stylesheet" href="{% static "interpay/bower_components/font-awesome/css/font-awesome.min.css" %}">
       <link rel="stylesheet" href="{% static 'interpay/css/registeration_form.css' %}">
       <link rel="shortcut icon" type="image/png" href="{% static 'interpay/images/ipay-favicon.ico' %}"/>
       <link rel="stylesheet" href="{% static 'interpay/css/sweetalert.css' %}"/>
       <link rel="stylesheet" href="{% static 'interpay/css/wallets.css' %}">
    {% endblock %}
    {% block JS %}
        <script type="text/javascript" src="{% static 'interpay/js/conversion.js' %}"></script>
        <script src="{% static 'interpay/jquery/jquery-1.10.2.min.js' %}"></script>
        <script src="{% static 'interpay/jquery/jquery-ui.js' %}"></script>
        <script src="{% static 'interpay/js/sweetalert.min.js' %}"></script>
        <script src='https://www.google.com/recaptcha/api.js'></script>
        <script>
       $(document).ready(function(){
        var inf= $('#message').text();
       if( $('#message').text().length!=42)
       {
             swal({

            title: '<div>Successfully Created</div> <div style="color:orange; font-size: small"> Click on  your account Id if you want to go to your account </div><u></u> <a href="/wallets/{{ account_id }}">{{account_id}}</a> ',
            type: 'info',
            html: ' ' + 'and other HTML tags',
            type: "info",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            cancelButtonText: "Back to current wallet",
            closeOnConfirm: false,
            closeOnCancel: false,
            showConfirmButton: false,
              });
       }
        });
       var unsaved = false;
       $(":input").change(function(){ //trigers change in all input fields including text type
       unsaved = false;
          });

        function unloadPage(){
         if(unsaved){
        return "You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?";
                   }
         }

        window.onbeforeunload = unloadPage;
        function formSubmitter(formTag,messageTag) {

            swal({
             title: 'Conversion',
             text: 'Your conversion is in process',
             type: 'info',
             showConfirmButton: false,
              });
            document.getElementById("success").style.display = "block";
            document.getElementById(messageTag).innerHTML = "You have changed currency";
            document.getElementById("sampleform").style.display = "none";
            setTimeout("time()", 1000);
        }
          function time() {
                document.getElementById("sampleform").submit();
            }

        </script>
    {% endblock %}
</head>
<body>
{% block cont-header %}
    <div>
        <h3 class="page-title">
            {% trans 'Wallet Info' %}
        </h3>
    </div>
{% endblock %}
{% block cont-body %}

         <div class="table-responsive">
            <table id="wal-tab" class="table">
                <thead>
                <tr class="table-header-row">
                    <th class="table-header-cell">
                        {% trans 'Wallet Code' %}
                    </th>
                    <th class="table-header-cell">
                        {% trans 'Wallet Type' %}
                    </th>
                    <th class="table-header-cell">
                        {% trans 'Currency Name' %}
                    </th>
                    <th class="table-header-cell">
                        {% trans 'Currency Symbol' %}
                    </th>
                    <th class="table-header-cell">
                        {% trans 'Balance' %}
                    </th>
                    <th class="table-header-cell">
                        {% trans 'Wallet Description' %}
                    </th>
                    <th class="table-header-cell">
                    </th>
                    {#                    <th  class="table-header-cell">#}
                    {#                        {% trans 'Converted Value' %}#}
                    {#                    </th>#}
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="table-cell">{{ account.account_id }} </td>
                    <td class="table-cell">user</td>
                    <td class="table-cell"></td>
                    <td class="table-cell">{{ account.cur_code }}</td>
                    <td class="table-cell">{{ account.balance }}</td>
                    <td class="table-cell">{{ account.name }}</td>
                    <td class="table-cell"></td>
                </tr>

                </tbody>
            </table>
       </div>
              <div id="message">
                          <a href="/wallets/{{ account_id }}">{{ message }}</a>
              </div>
            <form method="post" action="/wallets/actual_convert/" id="sampleform" class="form-style-9 w3-hide-large w3-hide-medium" style="width:100%; height: 19%;">
                {% csrf_token %}

                <div  style="margin-left: 0 !important;margin-right: 0 !important;">

                    <div style="margin-right:0px;width:300px;margin-left: 10px " >
                        <div id="error" style="color:red">
                            {{ error }}
                        </div>
                        <label>{% trans 'Amount' %}: </label>
                        <input  id="amount" name="amount" type="text" placeholder={{ recommended }}><br>
                        <label>{% trans 'To Currency' %}: </label>
                        <select name="currency" id="currency">
                            <option>Select Currency...</option>
                            {% for curr in CURRENCIES %}
                                <option value="{{ curr.code }}">
                                    {{ curr.symbol }} {{ curr.name }}
                                </option>
                            {% endfor %}
                        </select>
                        <input type="hidden" name="account_id" value="{{ account.account_id }}">
                        <br>
                       <input value="Submit" type='button' onclick="formSubmitter('sampleform','success')">
                    </div>
                </div>
            </form>
             <form method="post" action="/wallets/actual_convert/" id="sampleform" class="form-style-9 w3-hide-small w3-hide-medium" style="width:40% ; height: 20%;">
                {% csrf_token %}

                <div  style="margin-left: 0 !important;margin-right: 0 !important;">

                    <div style="margin-right:0px;width:300px;margin-left: 10px " >
                        <div id="error" style="color:red">
                            {{ error }}
                        </div>
                        <label>{% trans 'Amount' %}: </label>
                        <input  id="amount" name="amount" type="text" placeholder={{ recommended }}><br>
                        <label>{% trans 'To Currency' %}: </label>
                        <select name="currency" id="currency">
                            <option>Select Currency...</option>
                            {% for curr in CURRENCIES %}
                                <option value="{{ curr.code }}">
                                    {{ curr.symbol }} {{ curr.name }}
                                </option>
                            {% endfor %}
                        </select>
                        <input type="hidden" name="account_id" value="{{ account.account_id }}">
                        <br>
                       <input value="Submit" type='button' onclick="formSubmitter('sampleform','success')">
                    </div>
                </div>
            </form>
             <form method="post" action="/wallets/actual_convert/" id="sampleform" class="form-style-9 w3-hide-small w3-hide-large" style="width:70% ; height: 15%;">
                {% csrf_token %}

                <div  style="margin-left: 0 !important;margin-right: 0 !important;">

                    <div style="margin-right:0px;width:300px;margin-left: 10px " >
                        <div id="error" style="color:red">
                            {{ error }}
                        </div>
                        <label>{% trans 'Amount' %}: </label>
                        <input  id="amount" name="amount" type="text" placeholder={{ recommended }}><br>
                        <label>{% trans 'To Currency' %}: </label>
                        <select name="currency" id="currency">
                            <option>Select Currency...</option>
                            {% for curr in CURRENCIES %}
                                <option value="{{ curr.code }}">
                                    {{ curr.symbol }} {{ curr.name }}
                                </option>
                            {% endfor %}
                        </select>
                        <input type="hidden" name="account_id" value="{{ account.account_id }}">
                        <br>
                       <input value="Submit" type='button' onclick="formSubmitter('sampleform','success')">
                    </div>
                </div>
            </form>
         <div style="display: none; width: 80%; height: 30%" class="alert alert-success" id='success'></div>
        </div>
        <hr>


        <div class="table-responsive">
                 <table id="wal-tab" class="table">
                    <thead>
                    <tr class="table-header-row">
                        <th class="table-header-cell">
                            {% trans 'Index' %}
                        </th>
                        <th class="table-header-cell">
                            {% trans 'Recharge ID' %}
                        </th>
                        <th class="table-header-cell">
                            {% trans 'Date' %}
                        </th>
                        <th class="table-header-cell">
                            {% trans 'Wallet Code' %}
                        </th>
                        <th class="table-header-cell">
                            {% trans 'Currency' %}
                        </th>
                        <th class="table-header-cell">
                            {% trans 'Card Type' %}
                        </th>
                        <th class="table-header-cell">
                            {% trans 'Amount' %}
                        </th>
                        <th class="table-header-cell">
                            {% trans 'Status' %}
                        </th>
                        <th class="table-header-cell"></th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for d in deposit_set %}
                        <tr>
                            <td class="table-cell">{{ forloop.counter }}</td>
                            <td class="table-cell">{{ d.id }}</td>
                            <td class="table-cell">{{ d.date }}</td>
                            <td class="table-cell">{{ d.account.account_id }}</td>
                            <td class="table-cell">{{ d.cur_code }}</td>
                            <td class="table-cell"></td>
                            <td class="table-cell">{{ d.amount }}</td>
                            <td class="table-cell">
                                {% ifequal d.status True %}
                                Successful
                                {% else %}
                                 Failed
                                {% endifequal %}

                            </td>
                        </tr>
                    {% endfor %}

                    </tbody>
                </table>
                </div>
{% endblock %}

</body>

</html>

